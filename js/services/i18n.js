(() => {
const translations = {
  en: {
    dashboard: "Dashboard",
    patients: "Patients",
    doctors: "Doctors",
    services: "Services",
    appointments: "Appointments",
    prescriptions: "Prescriptions",
    logout: "Logout",
    hospital: "Hospital",
    backoffice: "Backoffice",
    search: "Search...",
    export: "Export",
    add: "Add",
    firstName: "First Name",
    lastName: "Last Name",
    email: "Email",
    phone: "Phone",
    bloodGroup: "Blood Group",
    actions: "Actions",
    view: "View",
    edit: "Edit",
    delete: "Delete",
    noPatients: "No patients found.",
    showing: "Showing",
    of: "of",
    addPatient: "Add Patient",
    editPatient: "Edit Patient",
    save: "Save",
    cancel: "Cancel",
    patientDetails: "Patient Details",
    exportCSV: "Export CSV",
    exportPDF: "Export PDF",
    welcome: "Welcome back",
    signIn: "Sign in to access the dashboard",
    username: "Username",
    password: "Password",
    login: "Login",
    demo: "Demo: admin / admin",
    patientsByService: "Patients by service",
    appointmentsByDay: "Appointments by day",
    appointmentsEvolution: "Appointments evolution (last 7 days)",
    appointmentsByStatus: "Appointments by status",
    doctorsBySpecialty: "Doctors by specialty",
    totalPatients: "Total patients",
    totalDoctors: "Total doctors",
    totalAppointments: "Total appointments",
    totalServices: "Total services",
    totalPrescriptions: "Total prescriptions",
    scheduled: "Scheduled",
    completed: "Completed",
    cancelled: "Cancelled",
    dateOfBirth: "Date of Birth",
    gender: "Gender",
    address: "Address",
    service: "Service",
    selectService: "Select a service",
    male: "Male",
    female: "Female",
    fullName: "Full Name",
    confirmDelete: "Are you sure you want to delete this patient?",
    specialty: "Specialty",
    noDoctors: "No doctors found.",
    name: "Name",
    description: "Description",
    noServices: "No services found.",
    date: "Date",
    time: "Time",
    status: "Status",
    patient: "Patient",
    doctor: "Doctor",
    noAppointments: "No appointments found.",
    medications: "Medications",
    noPrescriptions: "No prescriptions found.",
    unknown: "Unknown"
  },
  fr: {
    dashboard: "Tableau de bord",
    patients: "Patients",
    doctors: "MÃ©decins",
    services: "Services",
    appointments: "Rendez-vous",
    prescriptions: "Ordonnances",
    logout: "DÃ©connexion",
    hospital: "HÃ´pital",
    backoffice: "Administration",
    search: "Rechercher...",
    export: "Exporter",
    add: "Ajouter",
    firstName: "PrÃ©nom",
    lastName: "Nom",
    email: "Email",
    phone: "TÃ©lÃ©phone",
    bloodGroup: "Groupe Sanguin",
    actions: "Actions",
    view: "Voir",
    edit: "Modifier",
    delete: "Supprimer",
    noPatients: "Aucun patient trouvÃ©.",
    showing: "Affichage de",
    of: "sur",
    addPatient: "Ajouter un patient",
    editPatient: "Modifier le patient",
    save: "Enregistrer",
    cancel: "Annuler",
    patientDetails: "DÃ©tails du patient",
    exportCSV: "Exporter CSV",
    exportPDF: "Exporter PDF",
    welcome: "Bon retour",
    signIn: "Connectez-vous pour accÃ©der au tableau de bord",
    username: "Nom d'utilisateur",
    password: "Mot de passe",
    login: "Connexion",
    demo: "DÃ©mo: admin / admin",
    patientsByService: "Patients par service",
    appointmentsByDay: "Rendez-vous par jour",
    appointmentsEvolution: "Ã‰volution des rendez-vous (7 derniers jours)",
    appointmentsByStatus: "Rendez-vous par statut",
    doctorsBySpecialty: "MÃ©decins par spÃ©cialitÃ©",
    totalPatients: "Total patients",
    totalDoctors: "Total mÃ©decins",
    totalAppointments: "Total rendez-vous",
    totalServices: "Total services",
    totalPrescriptions: "Total ordonnances",
    scheduled: "PlanifiÃ©",
    completed: "TerminÃ©",
    cancelled: "AnnulÃ©",
    dateOfBirth: "Date de naissance",
    gender: "Genre",
    address: "Adresse",
    service: "Service",
    selectService: "SÃ©lectionnez un service",
    male: "Homme",
    female: "Femme",
    fullName: "Nom complet",
    confirmDelete: "ÃŠtes-vous sÃ»r de vouloir supprimer ce patient ?",
    specialty: "SpÃ©cialitÃ©",
    noDoctors: "Aucun mÃ©decin trouvÃ©.",
    name: "Nom",
    description: "Description",
    noServices: "Aucun service trouvÃ©.",
    date: "Date",
    time: "Heure",
    status: "Statut",
    patient: "Patient",
    doctor: "MÃ©decin",
    noAppointments: "Aucun rendez-vous trouvÃ©.",
    medications: "MÃ©dicaments",
    noPrescriptions: "Aucune ordonnance trouvÃ©e.",
    unknown: "Inconnu",
    addDoctor: "Ajouter un mÃ©decin",
    editDoctor: "Modifier le mÃ©decin",
    doctorDetails: "DÃ©tails du mÃ©decin",
    addService: "Ajouter un service",
    editService: "Modifier le service",
    serviceDetails: "DÃ©tails du service",
    addAppointment: "Ajouter un rendez-vous",
    editAppointment: "Modifier le rendez-vous",
    appointmentDetails: "DÃ©tails du rendez-vous",
    addPrescription: "Ajouter une ordonnance",
    editPrescription: "Modifier l'ordonnance",
    prescriptionDetails: "DÃ©tails de l'ordonnance",
    selectDoctor: "SÃ©lectionnez un mÃ©decin",
    selectPatient: "SÃ©lectionnez un patient",
    dosage: "Dosage",
    duration: "DurÃ©e",
    prescriptionDate: "Date",
    confirmDeleteDoctor: "ÃŠtes-vous sÃ»r de vouloir supprimer ce mÃ©decin ?",
    confirmDeleteService: "ÃŠtes-vous sÃ»r de vouloir supprimer ce service ?",
    confirmDeleteAppointment: "ÃŠtes-vous sÃ»r de vouloir supprimer ce rendez-vous ?",
    confirmDeletePrescription: "ÃŠtes-vous sÃ»r de vouloir supprimer cette ordonnance ?",
    entries: "entrÃ©es",
    previous: "PrÃ©cÃ©dent",
    next: "Suivant",
    filter: "Filtrer",
    details: "DÃ©tails",
    close: "Fermer",
    confirm: "Confirmer",
    noData: "Aucune donnÃ©e disponible",
    total: "Total",
    recentAppointments: "Rendez-vous rÃ©cents",
    cardiology: "Cardiologie",
    neurology: "Neurologie",
    pediatrics: "PÃ©diatrie",
    orthopedics: "OrthopÃ©die",
    dermatology: "Dermatologie",
    generalMedicine: "MÃ©decine GÃ©nÃ©rale",
    surgery: "Chirurgie",
    oncology: "Oncologie"
  },
  ar: {
    dashboard: "Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©",
    patients: "Ø§Ù„Ù…Ø±Ø¶Ù‰",
    doctors: "Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡",
    services: "Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
    appointments: "Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯",
    prescriptions: "Ø§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©",
    logout: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
    hospital: "Ù…Ø³ØªØ´ÙÙ‰",
    backoffice: "Ø§Ù„Ù…ÙƒØªØ¨ Ø§Ù„Ø®Ù„ÙÙŠ",
    search: "Ø¨Ø­Ø«...",
    export: "ØªØµØ¯ÙŠØ±",
    add: "Ø¥Ø¶Ø§ÙØ©",
    firstName: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„",
    lastName: "Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©",
    email: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
    phone: "Ø§Ù„Ù‡Ø§ØªÙ",
    bloodGroup: "ÙØµÙŠÙ„Ø© Ø§Ù„Ø¯Ù…",
    actions: "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",
    view: "Ø¹Ø±Ø¶",
    edit: "ØªØ¹Ø¯ÙŠÙ„",
    delete: "Ø­Ø°Ù",
    noPatients: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø±Ø¶Ù‰.",
    showing: "Ø¹Ø±Ø¶",
    of: "Ù…Ù†",
    addPatient: "Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙŠØ¶",
    editPatient: "ØªØ¹Ø¯ÙŠÙ„ Ù…Ø±ÙŠØ¶",
    save: "Ø­ÙØ¸",
    cancel: "Ø¥Ù„ØºØ§Ø¡",
    patientDetails: "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø±ÙŠØ¶",
    exportCSV: "ØªØµØ¯ÙŠØ± CSV",
    exportPDF: "ØªØµØ¯ÙŠØ± PDF",
    welcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ",
    signIn: "Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©",
    username: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
    password: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
    login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
    demo: "Ø¹Ø±Ø¶ ØªØ¬Ø±ÙŠØ¨ÙŠ: admin / admin",
    patientsByService: "Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø­Ø³Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø©",
    appointmentsByDay: "Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„ÙŠÙˆÙ…",
    appointmentsEvolution: "ØªØ·ÙˆØ± Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ (Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…)",
    appointmentsByStatus: "Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©",
    doctorsBySpecialty: "Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„ØªØ®ØµØµ",
    totalPatients: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø±Ø¶Ù‰",
    totalDoctors: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡",
    totalAppointments: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯",
    totalServices: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
    totalPrescriptions: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©",
    scheduled: "Ù…Ø¬Ø¯ÙˆÙ„",
    completed: "Ù…ÙƒØªÙ…Ù„",
    cancelled: "Ù…Ù„ØºÙ‰",
    dateOfBirth: "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯",
    gender: "Ø§Ù„Ù†ÙˆØ¹",
    address: "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",
    service: "Ø§Ù„Ø®Ø¯Ù…Ø©",
    selectService: "Ø§Ø®ØªØ± Ø®Ø¯Ù…Ø©",
    male: "Ø°ÙƒØ±",
    female: "Ø£Ù†Ø«Ù‰",
    fullName: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",
    confirmDelete: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø±ÙŠØ¶ØŸ",
    specialty: "Ø§Ù„ØªØ®ØµØµ",
    noDoctors: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£Ø·Ø¨Ø§Ø¡.",
    name: "Ø§Ù„Ø§Ø³Ù…",
    description: "Ø§Ù„ÙˆØµÙ",
    noServices: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø®Ø¯Ù…Ø§Øª.",
    date: "Ø§Ù„ØªØ§Ø±ÙŠØ®",
    time: "Ø§Ù„ÙˆÙ‚Øª",
    status: "Ø§Ù„Ø­Ø§Ù„Ø©",
    patient: "Ø§Ù„Ù…Ø±ÙŠØ¶",
    doctor: "Ø§Ù„Ø·Ø¨ÙŠØ¨",
    noAppointments: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ÙˆØ§Ø¹ÙŠØ¯.",
    medications: "Ø§Ù„Ø£Ø¯ÙˆÙŠØ©",
    noPrescriptions: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙˆØµÙØ§Øª Ø·Ø¨ÙŠØ©.",
    unknown: "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ",
    addDoctor: "Ø¥Ø¶Ø§ÙØ© Ø·Ø¨ÙŠØ¨",
    editDoctor: "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¨",
    doctorDetails: "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¨",
    addService: "Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©",
    editService: "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©",
    serviceDetails: "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©",
    addAppointment: "Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¹Ø¯",
    editAppointment: "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¹Ø¯",
    appointmentDetails: "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…ÙˆØ¹Ø¯",
    addPrescription: "Ø¥Ø¶Ø§ÙØ© ÙˆØµÙØ© Ø·Ø¨ÙŠØ©",
    editPrescription: "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆØµÙØ© Ø§Ù„Ø·Ø¨ÙŠØ©",
    prescriptionDetails: "ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØµÙØ© Ø§Ù„Ø·Ø¨ÙŠØ©",
    selectDoctor: "Ø§Ø®ØªØ± Ø·Ø¨ÙŠØ¨",
    selectPatient: "Ø§Ø®ØªØ± Ù…Ø±ÙŠØ¶",
    dosage: "Ø§Ù„Ø¬Ø±Ø¹Ø©",
    duration: "Ø§Ù„Ù…Ø¯Ø©",
    prescriptionDate: "Ø§Ù„ØªØ§Ø±ÙŠØ®",
    confirmDeleteDoctor: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ø¨ÙŠØ¨ØŸ",
    confirmDeleteService: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø©ØŸ",
    confirmDeleteAppointment: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¹Ø¯ØŸ",
    confirmDeletePrescription: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙˆØµÙØ© Ø§Ù„Ø·Ø¨ÙŠØ©ØŸ",
    entries: "Ø³Ø¬Ù„Ø§Øª",
    previous: "Ø§Ù„Ø³Ø§Ø¨Ù‚",
    next: "Ø§Ù„ØªØ§Ù„ÙŠ",
    filter: "ØªØµÙÙŠØ©",
    details: "ØªÙØ§ØµÙŠÙ„",
    close: "Ø¥ØºÙ„Ø§Ù‚",
    confirm: "ØªØ£ÙƒÙŠØ¯",
    noData: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª",
    total: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹",
    recentAppointments: "Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø®ÙŠØ±Ø©",
    cardiology: "Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù‚Ù„Ø¨",
    neurology: "Ø·Ø¨ Ø§Ù„Ø£Ø¹ØµØ§Ø¨",
    pediatrics: "Ø·Ø¨ Ø§Ù„Ø£Ø·ÙØ§Ù„",
    orthopedics: "Ø¬Ø±Ø§Ø­Ø© Ø§Ù„Ø¹Ø¸Ø§Ù…",
    dermatology: "Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ø¬Ù„Ø¯ÙŠØ©",
    generalMedicine: "Ø§Ù„Ø·Ø¨ Ø§Ù„Ø¹Ø§Ù…",
    surgery: "Ø§Ù„Ø¬Ø±Ø§Ø­Ø©",
    oncology: "Ø§Ù„Ø£ÙˆØ±Ø§Ù…",
    registrationDate: "ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„",
    headDoctor: "Ø±Ø¦ÙŠØ³ Ø§Ù„Ù‚Ø³Ù…",
    serviceName: "Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø©",
    prescriptionDate: "ØªØ§Ø±ÙŠØ® Ø§Ù„ÙˆØµÙØ©"
  }
};

let currentLang = localStorage.getItem('hospital_lang') || "en";

function setLanguage(lang) {
  if (translations[lang]) {
    currentLang = lang;
    localStorage.setItem('hospital_lang', lang);
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  }
}

function t(key) {
  return translations[currentLang][key] || key;
}

function getCurrentLang() {
  return currentLang;
}

// Initialize on load
setLanguage(currentLang);

const languages = [
  { code: "en", label: "English", flag: "ğŸ‡¬ğŸ‡§", dir: "ltr" },
  { code: "fr", label: "FranÃ§ais", flag: "ğŸ‡«ğŸ‡·", dir: "ltr" },
  { code: "ar", label: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", flag: "ğŸ‡¸ğŸ‡¦", dir: "rtl" },
];
window.App = window.App || {};
App.Services = App.Services || {};
App.Services.I18n = { t, setLanguage, getCurrentLang, languages };
window.t = t;
window.setLanguage = setLanguage;
window.getCurrentLang = getCurrentLang;
window.languages = languages;
})();
