(() => {
const translations = {
  en: {
    dashboard: "Dashboard",
    patients: "Patients",
    doctors: "Doctors",
    services: "Services",
    appointments: "Appointments",
    prescriptions: "Prescriptions",
    logout: "Logout",
    hospital: "Hospital",
    backoffice: "Backoffice",
    search: "Search...",
    export: "Export",
    add: "Add",
    firstName: "First Name",
    lastName: "Last Name",
    email: "Email",
    phone: "Phone",
    bloodGroup: "Blood Group",
    actions: "Actions",
    view: "View",
    edit: "Edit",
    delete: "Delete",
    noPatients: "No patients found.",
    showing: "Showing",
    of: "of",
    addPatient: "Add Patient",
    editPatient: "Edit Patient",
    save: "Save",
    cancel: "Cancel",
    patientDetails: "Patient Details",
    exportCSV: "Export CSV",
    exportPDF: "Export PDF",
    welcome: "Welcome back",
    signIn: "Sign in to access the dashboard",
    username: "Username",
    password: "Password",
    login: "Login",
    demo: "Demo: admin / admin",
    patientsByService: "Patients by service",
    appointmentsByDay: "Appointments by day",
    appointmentsEvolution: "Appointments evolution (last 7 days)",
    appointmentsByStatus: "Appointments by status",
    doctorsBySpecialty: "Doctors by specialty",
    totalPatients: "Total patients",
    totalDoctors: "Total doctors",
    totalAppointments: "Total appointments",
    totalServices: "Total services",
    totalPrescriptions: "Total prescriptions",
    scheduled: "Scheduled",
    completed: "Completed",
    cancelled: "Cancelled",
    dateOfBirth: "Date of Birth",
    gender: "Gender",
    address: "Address",
    service: "Service",
    selectService: "Select a service",
    male: "Male",
    female: "Female",
    fullName: "Full Name",
    confirmDelete: "Are you sure you want to delete this patient?"
  },
  fr: {
    dashboard: "Tableau de bord",
    patients: "Patients",
    doctors: "MÃ©decins",
    services: "Services",
    appointments: "Rendez-vous",
    prescriptions: "Ordonnances",
    logout: "DÃ©connexion",
    hospital: "HÃ´pital",
    backoffice: "Administration",
    search: "Rechercher...",
    export: "Exporter",
    add: "Ajouter",
    firstName: "PrÃ©nom",
    lastName: "Nom",
    email: "Email",
    phone: "TÃ©lÃ©phone",
    bloodGroup: "Groupe Sanguin",
    actions: "Actions",
    view: "Voir",
    edit: "Modifier",
    delete: "Supprimer",
    noPatients: "Aucun patient trouvÃ©.",
    showing: "Affichage de",
    of: "sur",
    addPatient: "Ajouter un patient",
    editPatient: "Modifier le patient",
    save: "Enregistrer",
    cancel: "Annuler",
    patientDetails: "DÃ©tails du patient",
    exportCSV: "Exporter CSV",
    exportPDF: "Exporter PDF",
    welcome: "Bon retour",
    signIn: "Connectez-vous pour accÃ©der au tableau de bord",
    username: "Nom d'utilisateur",
    password: "Mot de passe",
    login: "Connexion",
    demo: "DÃ©mo: admin / admin",
    patientsByService: "Patients par service",
    appointmentsByDay: "Rendez-vous par jour",
    appointmentsEvolution: "Ã‰volution des rendez-vous (7 derniers jours)",
    appointmentsByStatus: "Rendez-vous par statut",
    doctorsBySpecialty: "MÃ©decins par spÃ©cialitÃ©",
    totalPatients: "Total patients",
    totalDoctors: "Total mÃ©decins",
    totalAppointments: "Total rendez-vous",
    totalServices: "Total services",
    totalPrescriptions: "Total ordonnances",
    scheduled: "PlanifiÃ©",
    completed: "TerminÃ©",
    cancelled: "AnnulÃ©",
    dateOfBirth: "Date de naissance",
    gender: "Genre",
    address: "Adresse",
    service: "Service",
    selectService: "SÃ©lectionnez un service",
    male: "Homme",
    female: "Femme",
    fullName: "Nom complet",
    confirmDelete: "ÃŠtes-vous sÃ»r de vouloir supprimer ce patientÂ ?"
  },
  ar: {
    dashboard: "Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©",
    patients: "Ø§Ù„Ù…Ø±Ø¶Ù‰",
    doctors: "Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡",
    services: "Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
    appointments: "Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯",
    prescriptions: "Ø§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©",
    logout: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
    hospital: "Ù…Ø³ØªØ´ÙÙ‰",
    backoffice: "Ø§Ù„Ù…ÙƒØªØ¨ Ø§Ù„Ø®Ù„ÙÙŠ",
    search: "Ø¨Ø­Ø«...",
    export: "ØªØµØ¯ÙŠØ±",
    add: "Ø¥Ø¶Ø§ÙØ©",
    firstName: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„",
    lastName: "Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©",
    email: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
    phone: "Ø§Ù„Ù‡Ø§ØªÙ",
    bloodGroup: "ÙØµÙŠÙ„Ø© Ø§Ù„Ø¯Ù…",
    actions: "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",
    view: "Ø¹Ø±Ø¶",
    edit: "ØªØ¹Ø¯ÙŠÙ„",
    delete: "Ø­Ø°Ù",
    noPatients: "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø±Ø¶Ù‰.",
    showing: "Ø¹Ø±Ø¶",
    of: "Ù…Ù†",
    addPatient: "Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙŠØ¶",
    editPatient: "ØªØ¹Ø¯ÙŠÙ„ Ù…Ø±ÙŠØ¶",
    save: "Ø­ÙØ¸",
    cancel: "Ø¥Ù„ØºØ§Ø¡",
    patientDetails: "ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø±ÙŠØ¶",
    exportCSV: "ØªØµØ¯ÙŠØ± CSV",
    exportPDF: "ØªØµØ¯ÙŠØ± PDF",
    welcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ",
    signIn: "Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©",
    username: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
    password: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
    login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
    demo: "Ø¹Ø±Ø¶ ØªØ¬Ø±ÙŠØ¨ÙŠ: admin / admin",
    patientsByService: "Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø­Ø³Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø©",
    appointmentsByDay: "Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„ÙŠÙˆÙ…",
    appointmentsEvolution: "ØªØ·ÙˆØ± Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ (Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…)",
    appointmentsByStatus: "Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©",
    doctorsBySpecialty: "Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„ØªØ®ØµØµ",
    totalPatients: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø±Ø¶Ù‰",
    totalDoctors: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡",
    totalAppointments: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯",
    totalServices: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø§Øª",
    totalPrescriptions: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©",
    scheduled: "Ù…Ø¬Ø¯ÙˆÙ„",
    completed: "Ù…ÙƒØªÙ…Ù„",
    cancelled: "Ù…Ù„ØºÙ‰",
    dateOfBirth: "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯",
    gender: "Ø§Ù„Ù†ÙˆØ¹",
    address: "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",
    service: "Ø§Ù„Ø®Ø¯Ù…Ø©",
    selectService: "Ø§Ø®ØªØ± Ø®Ø¯Ù…Ø©",
    male: "Ø°ÙƒØ±",
    female: "Ø£Ù†Ø«Ù‰",
    fullName: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",
    confirmDelete: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø±ÙŠØ¶ØŸ"
  }
};

let currentLang = "en";

function setLanguage(lang) {
  if (translations[lang]) {
    currentLang = lang;
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  }
}

function t(key) {
  return translations[currentLang][key] || key;
}

function getCurrentLang() {
  return currentLang;
}

const languages = [
  { code: "en", label: "English", flag: "ğŸ‡¬ğŸ‡§", dir: "ltr" },
  { code: "fr", label: "FranÃ§ais", flag: "ğŸ‡«ğŸ‡·", dir: "ltr" },
  { code: "ar", label: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", flag: "ğŸ‡¸ğŸ‡¦", dir: "rtl" },
];
window.App = window.App || {};
App.Services = App.Services || {};
App.Services.I18n = { t, setLanguage, getCurrentLang, languages };
window.t = t;
window.setLanguage = setLanguage;
window.getCurrentLang = getCurrentLang;
window.languages = languages;
})();
